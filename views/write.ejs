<!DOCTYPE html>
<html lang="ko">

<head>
    <% include ./head %>
    <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
    <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
    <title><%=title%></title>
</head>

<body>
    <header>
        <% include ./header %>

    </header>
    <main role="main" class="content">
        <div class="container mt-5">
            <div class="row">
                <h2><%= title%></h2>
                <div class="col-md-12 topic">
                    <form action="/topic/create_process" method="post" class="" id="form" novalidate>
                        <input type="hidden" name="id" value='<%= id %>'>
                        <label for="title" class="mt-3">제목</label>
                        <input type="text" class="form-control" id="title" name="title" required>
                        <div class="invalid-feedback">
                            제목을 입력해주세요.
                        </div>
                        <label for="content" class="mt-3">내용</label>
                        <div id="editor"></div>
                        <textarea name="content" class="sr-only" id="hiddenContent"></textarea>
                        <textarea name="text" class="sr-only" id="hiddenText"></textarea>
                        <div class="text-right">
                            <button class="btn btn-primary btn-md mt-3 mb-3" type="submit">저장</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </main>

</body>
<script>
    var quill = new Quill('#editor', {
        modules: {
            toolbar: [
                ['bold', 'italic', 'underline', 'strike'],
                ['blockquote'],
                [{ 'header': 1 }, { 'header': 2 }],               
                [{ 'list': 'ordered'}, { 'list': 'bullet' }],
                ['image']
            ]
        },
        theme: 'snow'
    });

    $("#form").on("submit", function () {
        var editor = document.querySelector("#editor");
        $("#hiddenContent").val(editor.children[0].innerHTML);
        $("#hiddenText").val(quill.getText());
    })
</script>

</html>